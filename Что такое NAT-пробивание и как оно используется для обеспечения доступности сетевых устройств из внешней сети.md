NAT-пробивание (Network Address Translation traversal) - это метод обеспечения доступности сетевых устройств, находящихся за NAT-маршрутизатором, из внешней сети. NAT (Network Address Translation) используется для преобразования IP-адресов и портов для передачи данных между локальной сетью и внешней сетью, но он может представлять препятствие для непосредственного доступа к устройствам извне. NAT-пробивание позволяет преодолеть это ограничение.

Вот как работает NAT-пробивание:

1. Инициирующий запрос: Когда устройство во внешней сети пытается установить соединение с устройством, находящимся за NAT-маршрутизатором, оно отправляет запрос к внешнему IP-адресу и порту, которые маршрутизируются на маршрутизатор.

2. Пробивание NAT: Маршрутизатор, осознавая, что запрос предназначен для устройства внутри его сети, перенаправляет пакет на локальное устройство, несмотря на то, что IP-адрес назначения и порт не соответствуют его локальным IP-адресам.

3. Изменение IP-адресов и портов: Локальное устройство получает запрос и генерирует ответ. Затем маршрутизатор изменяет IP-адрес и порт исходящего пакета, чтобы он выглядел, как будто он отправляется от маршрутизатора.

4. Возврат ответа: Измененный пакет с ответом передается обратно через NAT-маршрутизатор во внешнюю сеть. Маршрутизатор изменяет адрес и порт назначения, чтобы ответ достиг инициирующего устройства.

5. Установление соединения: После этого инициирующее устройство и устройство за NAT-маршрутизатором могут обмениваться данными напрямую через NAT-маршрутизатор, используя установленные соединения и измененные адреса и порты.

Таким образом, NAT-пробивание позволяет преодолеть преграду, создаваемую NAT-маршрутизатором, и обеспечить доступность сетевых устройств из внешней сети. Оно позволяет инициировать соединения с устройствами в локальной сети, хотя они находятся за NAT-маршрутизатором и имеют локальные IP-адреса. Это особенно полезно для удаленного доступа к устройствам или запуска серверных приложений, которые должны быть доступны из интернета.